<template>
    <lightning-record-view-form record-id={opportunityId} object-api-name="Opportunity"></lightning-record-view-form>
        <lightning-card title="Request a Presales Activity" >

            <template if:true={showAlert}>
                <div class="slds-box_x-small slds-box slds-theme_shade slds-theme_alert-texture slds-theme_warning">
                    <p>
                        <strong>Be sure you only want to select one date!</strong> 
                    </p>
                </div>
            </template>
            
            <div class="slds-var-p-around_medium">
            <!--Search Products..add and remove -->
            <div class="search-table slds-box search-wrapper" style="background-color: #eef4ff;">
                <label for="date1" class="slds-text-title" ></label>
                <lightning-combobox name="product"
                                    label="Product"
                                    value={value}
                                    placeholder="Select Product"
                                    options={productSelector.products}
                                    onchange={productSelector.addProd} 
                                    required>
                </lightning-combobox>

                <abbr title="required" class="slds-required">*</abbr>
                <label for="date1" class="slds-text-title" >Selected:</label>
                <div class="selected-product-container" style="display: flex; gap: 1rem; flex-wrap: wrap;">                    
                    <template for:each={selectedProducts} for:item="prod">
                            <lightning-pill key={prod.product_ID}
                                            variant="destructive" 
                                            label={prod.name}
                                            title="Destructive action"
                                            data-item={prod.product_ID}
                                            onremove={productSelector.removeProd} >
                            </lightning-pill>
                    </template>
                </div>
            </div>      
    
            <lightning-combobox name="activity_type" 
                                label="Activity Type"
                                placeholder="Select activity type" 
                                options={activityTypes} 
                                onchange={selectActivityType} 
                                required >
            </lightning-combobox>

            <lightning-combobox name="location" 
                                label="Location" 
                                value={location} 
                                options={locationOptions} 
                                class="slds-var-p-top_small slds-var-p-bottom_small" 
                                onchange={setLocation} >
            </lightning-combobox>
            
            <abbr title="required" class="slds-required">*</abbr>
            <label for="date1" class="slds-text-title" >Date</label>
            <lightning-input type="datetime" label=" " data-item="date1" variant="label-hidden" onchange={dateInputHandler} required></lightning-input>
            <lightning-input type="datetime" label=" " data-item="date2" variant="label-hidden" class="slds-var-p-top_small" onchange={dateInputHandler} ></lightning-input>
            <lightning-input type="datetime" label=" " data-item="date3" variant="label-hidden" class="slds-var-p-top_small" onchange={dateInputHandler} ></lightning-input>

            <!--Text Description-->
            <lightning-textarea id="textarea" 
                                label="Notes" 
                                onchange ={updateNotes} >
            </lightning-textarea>

            <!--Submit button class="button"-->
            <lightning-button   id="dateAlert"
                                variant="submit" 
                                label="Submit" 
                                type="submit" 
                                disabled={isSubmitDisabled} 
                                title="Submit"
                                class="slds-var-p-top_small slds-align_absolute-center"
                                onclick={handleUploadAction} >
            </lightning-button>
        </div>
    </lightning-card>
</template>