<!-- sldsValidatorIgnore -->
<template>
    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
            aria-describedby="modal-content-id-1" class={boxClasses}>
            <div class="slds-modal__container">
                <!-- modal header start -->
                <header class="slds-modal__header">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                            title="Close" 
                            onclick={closeModal}>
                        <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small"></lightning-icon>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Pre-Sales Teams</h2>
                </header>

                   <!-- Modal/Popup Box LWC body starts here -->
                   <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                        <h1>Team</h1>
                        <template if:true={selectedUsersInfo}>
                            <template for:each={selectedUsersInfo} for:item="user">
                                <ul class="selectedUlList" key={user.Id}>
                                    <li class="selectedLiList">
                                        <div class="smallCard">
                                            <lightning-button-icon data-item={user.Id} 
                                                                   icon-name="utility:close"
                                                                   variant="bare" alternative-text="remove user" 
                                                                   class="slds-m-left_xx-small my-round-button" 
                                                                   title="Remove user" onclick={handleRemove}>
                                                                </lightning-button-icon>
                                            <div class="parent">
                                                <img src={user.FullPhotoUrl} alt="Image" class="assignedImg">
                                                {user.Name}
                                                <template for:each={user.proficiency} for:item="inner">
                                                    <li key={inner.product.name} class="helpText">
                                                        Proficiency:<br>
                                                        {inner.product.name}:
                                                        {inner.level}  
                                                    </li>
                                                </template>
                                            </div>
                                            <lightning-button-icon-stateful data-item={user.Id} icon-name="utility:adduser" size="small" selected={user.leadState} onclick={handleLead} alternative-text="Assign Lead" class="leadBtn"></lightning-button-icon-stateful>
                                        </div>
                                    </li>
                                </ul>
                            </template>
                        </template>
                        <div onchange={searchUsers}>
                            <lightning-input
                                name="enter-search"
                                label="Search with Name/Proficency Level"
                                type="search"
                            ></lightning-input>
                        </div>
                        <template if:true={filteredUnAssignedUsersInfo}>
                            <template for:each={filteredUnAssignedUsersInfo} for:item="user">
                                <ul key={user.Id}>
                                    <li> 
                                        <div class="card">
                                            <img src={user.FullPhotoUrl} alt="Image" class="unassignedImg">
                                            <div class="userInfo">
                                                <span style="font-weight: bold; font-size: 15px">{user.Name}</span>
                                                <ul>
                                                    <template for:each={user.proficiency} for:item="inner">
                                                        <li key={inner.product.name}>
                                                            {inner.product.name}:
                                                            {inner.level}       
                                                        </li>
                                                    </template>
                                                </ul>
                                            </div>
                                            <lightning-button data-item = {user.Id} 
                                                                variant="brand"
                                                                label="Assign" title="Assign/UnAssign" 
                                                                onclick={handleAssign} 
                                                                class="slds-m-left_x-small assignBtn">
                                            </lightning-button>
                                        </div>             
                                    </li>
                                </ul>
                            </template>
                        </template>              
                    </div>

                <!-- Modal/Popup Box LWC footer starts here -->
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_brand" onclick={pushDataAndToggle} title="OK">Save</button>
                </footer>

            </div>
        </section>
        <div class={backdropClasses}></div>
</template>
